<?xml version="1.0" encoding="UTF-8"?>

<!-- Please see ExampleMenu.xml for examples that customise the main menu -->
<!-- Please see menu.xsd for the menu validation schema. -->
<mainMenu>
  <menuBar>

    <!-- ======================== Render Menu ========================= -->
    <subMenu id="render_menu">
    <label>Render</label>

      <subMenu id="render_create_submenu">
      <label>Create Render Node</label>

        <scriptItem id="h.create_3Delight">
          <label>3Delight</label>
		  <insertBefore>h.create_mantra</insertBefore>
	  <scriptCode><![CDATA[import roptoolutils

newnode = roptoolutils.createRenderNode('3Delight')
camname = newnode.evalParm("camera")

camnode = hou.node(camname)
found = camnode != None
if found:
    nodetype = camnode.type()
    found = nodetype.name() == "cam"
if not found:
    obj = hou.node("/obj")
    # try to find another camera
    for node in obj.children():
        nodetype = node.type()
        if nodetype.name() == "cam":
            newnode.setParms({"camera": node.path()})
            found = True
            break
# no camera found: creates one
if not found:
    obj = hou.node("/obj")
    strs = camname.rsplit("/", 1)
    newnode = obj.createNode("cam", strs[1])]]></scriptCode>
        </scriptItem>

		<separatorItem>
		  <insertBefore>h.create_mantra</insertBefore>
		</separatorItem>
	  </subMenu>
    </subMenu>

  </menuBar>
</mainMenu>
