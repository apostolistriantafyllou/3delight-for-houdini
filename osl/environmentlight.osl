shader
environmentlight(
    string env_map = "",
    color light_color = color(1),
    float light_intensity = 1,
    float light_exposure = 1)
{
	vector R = normalize(I);
	// to align with Houdini env lights
	R = rotate(R, M_PI, vector(0,1,0));
	float s = (-atan2(R[0], R[2]) + M_PI) / (2*M_PI);
	float t = 1 - acos(R[1]) / M_PI;
	Ci = emission() * (color)texture(env_map, s, t) * light_color * light_intensity * pow(2, light_exposure);
}
